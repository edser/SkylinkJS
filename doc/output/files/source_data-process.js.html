<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Temasys Web SDK Documentation (0.6.19)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="name" content="skylinkjs">
  <meta name="version" content="0.6.19">
  <!-- Favicon -->
  <link href="../assets/img/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono" rel="stylesheet">
  <link href="../assets/vendor/font-awesome.min.css" rel="stylesheet" type="text/css">
  <!-- Styles -->
  <link href="../assets/vendor/prettify.min.css" rel="stylesheet" type="text/css">
  <link href="../assets/css/main.css" rel="stylesheet" type="text/css">
  <script src="../assets/vendor/jquery.min.js" type="text/javascript"></script>
  <script src="../assets/vendor/prettify.min.js" type="text/javascript"></script>
  <script src="../assets/js/main.js" type="text/javascript"></script>
</head>
<body>
  <!-- Navigation Header -->
  <navbar class="top">
    <a class="main" href="/">
      <img src="../assets/img/favicon.ico">
      <strong>Temasys</strong> Web SDK
    </a>
    <ul class="menu">
      <li><a href="https://github.com/Temasys/SkylinkJS" target="_blank">SkylinkJS Github</a></li>
      <li><a href="https://console.temasys.io/" target="_blank">Developer Console</a></li>
    </ul>
  </navbar>

  <!-- Body -->
  <section class="container">
    <div class="container-wrapper">
      <!-- Side Navigation -->
      <navbar class="side">
        <div id="side-menu" class="navbar-wrapper">
          <ul class="menu">
            <div class="section">
              <span class="header">Getting Started</span>    
              <li>
              <a href="#">1. Overview <i class="fa fa-caret-down"></i></a>
              <ul>
                  <li><a href="#">a. Architecture</a></li>
                  <li><a href="#">b. Authentication Methods</a></li>
                  <li><a href="#">c. Persistent Rooms</a></li>
                  <li><a href="#">d. Auto-Introduce & Privileged</a></li>
              </ul>
              </li>
              <li>
              <a href="#">2. Integrating to Your Site <i class="fa fa-caret-down"></i></a>
              <ul>
                  <li><a href="#">a. Referencing the SDK</a></li>
                  <li><a href="#">b. Code Samples</a></li>
                  <li><a href="#">c. Integrating your extensions & WebRTC plugin</a></li>
              </ul>
              </li>
              <li><a href="#" class="nodropdown">3. Demos</a></li>
            </div>
            <div class="section">
              <span class="header">API Documentation</span>
              <li>
                <a href="#">Temasys <small>module</small><i class="fa fa-caret-down"></i></a>
                <ul>
                </ul>
              </li>
                  ([&quot;Room&quot;,&quot;test&quot;])
                  <li>
                    <a href="classes/Room.html" class="nodropdown">
                      Room <small>class</small>
                    </a>
                  </li>
                  ([&quot;Skylink&quot;,&quot;test&quot;])
                  <li>
                    <a href="classes/Skylink.html" class="nodropdown">
                      Skylink <small>class</small>
                    </a>
                  </li>
                  ([&quot;Socket&quot;,&quot;test&quot;])
                  <li>
                    <a href="classes/Socket.html" class="nodropdown">
                      Socket <small>class</small>
                    </a>
                  </li>
                  ([&quot;Temasys.Peer&quot;,&quot;test&quot;])
                  <li>
                    <a href="classes/Temasys.Peer.html" class="nodropdown">
                      Temasys.Peer <small>class</small>
                    </a>
                  </li>
                  ([&quot;Temasys.Room&quot;,&quot;test&quot;])
                  <li>
                    <a href="classes/Temasys.Room.html" class="nodropdown">
                      Temasys.Room <small>class</small>
                    </a>
                  </li>
                  ([&quot;Temasys.Socket&quot;,&quot;test&quot;])
                  <li>
                    <a href="classes/Temasys.Socket.html" class="nodropdown">
                      Temasys.Socket <small>class</small>
                    </a>
                  </li>
                  ([&quot;Temasys.Utils&quot;,&quot;test&quot;])
                  <li>
                    <a href="classes/Temasys.Utils.html" class="nodropdown">
                      Temasys.Utils <small>class</small>
                    </a>
                  </li>
                  ([&quot;Utils&quot;,&quot;test&quot;])
                  <li>
                    <a href="classes/Utils.html" class="nodropdown">
                      Utils <small>class</small>
                    </a>
                  </li>
            </div>
          </ul>
        </div>
      </navbar>      <!-- Content -->
      <h1 class="file-heading">File: source/data-process.js</h1>
      
      <div class="file">
          <pre class="code prettyprint linenums">
      /**
       * The list of supported data transfer data types.
       * @attribute DATA_TRANSFER_DATA_TYPE
       * @param {String} BINARY_STRING &lt;small&gt;Value &lt;code&gt;&quot;binaryString&quot;&lt;/code&gt;&lt;/small&gt;
       *   The value of data transfer data type when Blob binary data chunks encoded to Base64 encoded string are
       *   sent or received over the Datachannel connection for the data transfer session.
       *   &lt;small&gt;Used only in &lt;a href=&quot;#method_sendBlobData&quot;&gt;&lt;code&gt;sendBlobData()&lt;/code&gt; method&lt;/a&gt; when
       *   parameter &lt;code&gt;sendChunksAsBinary&lt;/code&gt; value is &lt;code&gt;false&lt;/code&gt;.&lt;/small&gt;
       * @param {String} ARRAY_BUFFER  &lt;small&gt;Value &lt;code&gt;&quot;arrayBuffer&quot;&lt;/code&gt;&lt;/small&gt;
       *   The value of data transfer data type when ArrayBuffer binary data chunks are
       *   sent or received over the Datachannel connection for the data transfer session.
       *   &lt;small&gt;Used only in &lt;a href=&quot;#method_sendBlobData&quot;&gt;&lt;code&gt;sendBlobData()&lt;/code&gt; method&lt;/a&gt; when
       *   parameter &lt;code&gt;sendChunksAsBinary&lt;/code&gt; value is &lt;code&gt;true&lt;/code&gt;.&lt;/small&gt;
       * @param {String} BLOB          &lt;small&gt;Value &lt;code&gt;&quot;blob&quot;&lt;/code&gt;&lt;/small&gt;
       *   The value of data transfer data type when Blob binary data chunks are
       *   sent or received over the Datachannel connection for the data transfer session.
       *   &lt;small&gt;Used only in &lt;a href=&quot;#method_sendBlobData&quot;&gt;&lt;code&gt;sendBlobData()&lt;/code&gt; method&lt;/a&gt; when
       *   parameter &lt;code&gt;sendChunksAsBinary&lt;/code&gt; value is &lt;code&gt;true&lt;/code&gt;.&lt;/small&gt;
       * @param {String} STRING        &lt;small&gt;Value &lt;code&gt;&quot;string&quot;&lt;/code&gt;&lt;/small&gt;
       *   The value of data transfer data type when only string data chunks are
       *   sent or received over the Datachannel connection for the data transfer session.
       *   &lt;small&gt;Used only in &lt;a href=&quot;#method_sendURLData&quot;&gt;&lt;code&gt;sendURLData()&lt;/code&gt; method&lt;/a&gt;.&lt;/small&gt;
       * @type JSON
       * @readOnly
       * @for Skylink
       * @since 0.1.0
       */
      Skylink.prototype.DATA_TRANSFER_DATA_TYPE = {
        BINARY_STRING: &#x27;binaryString&#x27;,
        ARRAY_BUFFER: &#x27;arrayBuffer&#x27;,
        BLOB: &#x27;blob&#x27;,
        STRING: &#x27;string&#x27;
      };
      
      /**
       * Stores the data chunk size for Blob transfers.
       * @attribute _CHUNK_FILE_SIZE
       * @type Number
       * @private
       * @readOnly
       * @for Skylink
       * @since 0.5.2
       */
      Skylink.prototype._CHUNK_FILE_SIZE = 49152;
      
      /**
       * Stores the data chunk size for Blob transfers transferring from/to
       *   Firefox browsers due to limitation tested in the past in some PCs (linx predominatly).
       * @attribute _MOZ_CHUNK_FILE_SIZE
       * @type Number
       * @private
       * @readOnly
       * @for Skylink
       * @since 0.5.2
       */
      Skylink.prototype._MOZ_CHUNK_FILE_SIZE = 12288;
      
      /**
       * Stores the data chunk size for binary Blob transfers.
       * @attribute _BINARY_FILE_SIZE
       * @type Number
       * @private
       * @readOnly
       * @for Skylink
       * @since 0.6.16
       */
      Skylink.prototype._BINARY_FILE_SIZE = 65456;
      
      /**
       * Stores the data chunk size for binary Blob transfers.
       * @attribute _MOZ_BINARY_FILE_SIZE
       * @type Number
       * @private
       * @readOnly
       * @for Skylink
       * @since 0.6.16
       */
      Skylink.prototype._MOZ_BINARY_FILE_SIZE = 16384;
      
      /**
       * Stores the data chunk size for data URI string transfers.
       * @attribute _CHUNK_DATAURL_SIZE
       * @type Number
       * @private
       * @readOnly
       * @for Skylink
       * @since 0.5.2
       */
      Skylink.prototype._CHUNK_DATAURL_SIZE = 1212;
      
      /**
       * Function that converts Base64 string into Blob object.
       * This is referenced from devnull69@stackoverflow.com #6850276.
       * @method _base64ToBlob
       * @private
       * @for Skylink
       * @since 0.1.0
       */
      Skylink.prototype._base64ToBlob = function(dataURL) {
        var byteString = atob(dataURL);
        // write the bytes of the string to an ArrayBuffer
        var ab = new ArrayBuffer(byteString.length);
        var ia = new Uint8Array(ab);
        for (var j = 0; j &lt; byteString.length; j++) {
          ia[j] = byteString.charCodeAt(j);
        }
        // write the ArrayBuffer to a blob, and you&#x27;re done
        return new Blob([ab]);
      };
      
      /**
       * Function that converts a Blob object into Base64 string.
       * @method _blobToBase64
       * @private
       * @for Skylink
       * @since 0.1.0
       */
      Skylink.prototype._blobToBase64 = function(data, callback) {
        var fileReader = new FileReader();
        fileReader.onload = function() {
          // Load Blob as dataurl base64 string
          var base64BinaryString = fileReader.result.split(&#x27;,&#x27;)[1];
          callback(base64BinaryString);
        };
        fileReader.readAsDataURL(data);
      };
      
      /**
       * Function that converts a Blob object into ArrayBuffer object.
       * @method _blobToArrayBuffer
       * @private
       * @for Skylink
       * @since 0.1.0
       */
      Skylink.prototype._blobToArrayBuffer = function(data, callback) {
        var self = this;
        var fileReader = new FileReader();
        fileReader.onload = function() {
          // Load Blob as dataurl base64 string
          if (self._isUsingPlugin) {
            callback(new Int8Array(fileReader.result));
          } else {
            callback(fileReader.result);
          }
        };
        fileReader.readAsArrayBuffer(data);
      };
      
      /**
       * Function that chunks Blob object based on the data chunk size provided.
       * If provided Blob object size is lesser than or equals to the chunk size, it should return an array
       *   of length of &lt;code&gt;1&lt;/code&gt;.
       * @method _chunkBlobData
       * @private
       * @for Skylink
       * @since 0.5.2
       */
      Skylink.prototype._chunkBlobData = function(blob, chunkSize) {
        var chunksArray = [];
        var startCount = 0;
        var endCount = 0;
        var blobByteSize = blob.size;
      
        if (blobByteSize &gt; chunkSize) {
          // File Size greater than Chunk size
          while ((blobByteSize - 1) &gt; endCount) {
            endCount = startCount + chunkSize;
            chunksArray.push(blob.slice(startCount, endCount));
            startCount += chunkSize;
          }
          if ((blobByteSize - (startCount + 1)) &gt; 0) {
            chunksArray.push(blob.slice(startCount, blobByteSize - 1));
          }
        } else {
          // File Size below Chunk size
          chunksArray.push(blob);
        }
        return chunksArray;
      };
      
      /**
       * Function that chunks large string into string chunks based on the data chunk size provided.
       * If provided string length is lesser than or equals to the chunk size, it should return an array
       *   of length of &lt;code&gt;1&lt;/code&gt;.
       * @method _chunkDataURL
       * @private
       * @for Skylink
       * @since 0.6.1
       */
      Skylink.prototype._chunkDataURL = function(dataURL, chunkSize) {
        var outputStr = dataURL; //encodeURIComponent(dataURL);
        var dataURLArray = [];
        var startCount = 0;
        var endCount = 0;
        var dataByteSize = dataURL.size || dataURL.length;
      
        if (dataByteSize &gt; chunkSize) {
          // File Size greater than Chunk size
          while ((dataByteSize - 1) &gt; endCount) {
            endCount = startCount + chunkSize;
            dataURLArray.push(outputStr.slice(startCount, endCount));
            startCount += chunkSize;
          }
          if ((dataByteSize - (startCount + 1)) &gt; 0) {
            chunksArray.push(outputStr.slice(startCount, dataByteSize - 1));
          }
        } else {
          // File Size below Chunk size
          dataURLArray.push(outputStr);
        }
      
        return dataURLArray;
      };
          </pre>
      </div>
    </div>
   </section>
</body>
</html>
