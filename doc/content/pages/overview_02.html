<h1>Overview - Authentication Methods</h1>
<article class="_first">
  <p>There are 2 methods in which you can authenticate the <b>App Key</b> to access the <b>App</b>
  space and start the <b>Room</b> connection session.</p>
</article>
<article>
  <h3>CORS domain method:</h3>
  <img src="content/img/overview_02.png" width="550px">
  <p>This method allows the client to be authenticated by the site accessing CORS (Cross-Origin domain). Note that hash
  authentication method is preferred by default, unless it is not provided.</p>
  <p>If the client is accessing from <code>appsite.com</code> and the <b>App Key</b> list of CORS domains configured does not
  contain the client's accessing CORS domain, the connection session will not start and will be rejected. This will only
  work if the <b>App Key</b> CORS domain configuration contains one of the client's accessing CORS domain.</p>
  <p>To configure the list of allowed CORS domains, simply access the <a href="https://console.temasys.io">Temasys Console</a>
  and set the <u>CORS URL</u> configuration setting for the <b>App Key</b> used. To configure it by REST API, you can do a
  PUT request to <code class="route">PUT /rest/apps/:appkey</code> and update the <code>"corsurl"</code> (string) property.</p>
  <p><a href="https://temasys.atlassian.net/wiki/spaces/TPD/pages/10387490/Skylink+REST+API">
    (Read more about the Temasys REST API documentation here)</a></p>
  
  <h4>Here are some rules for setting the list of CORS domains:</h4>
  <ul>
    <li><span>Should NOT contain spaces (e.g. <code>app.com, app2.com</code>)</span></li>
    <li><span>Should NOT contain ports (e.g. <code>app.com:4232</code>)</span></li>
    <li><span>Should NOT contain protocol (e.g. <code>https://app.com</code>)</span></li>
    <li><span>Should NOT contain path (e.g. <code>app.com/path</code>)</span></li>
    <li><span>Multiple domains must be separated with a comma.
    IP addresses can be used (e.g. <code>app.com,app2.org,192.1.0.2,testdomain.io</code>)</span></li>
  </ul>

  <p>For this method, the starting datetime is the <u>current datetime</u> when the authentication
  is made and the duration is <u>24</u> hours for the client connection session to the
  <b>Room</b> after authentication is successful.</p>
</article>
<article>
  <h3>Hash method:</h3>
  <img src="content/img/overview_03.png" width="550px">
  
  <p>This method allows the client to be authenticated by verification of the hash generated by concatenating the
  starting datetime stamp, duration (in hours), the <b>Room</b> name and the <b>App Key</b> secret. For client without accessing CORS checks,
  this would be the method preferred.</p>

  <p>If the hash provided does not match what is generated by the server, the connection session will not start and
  will be rejected. This will only work if the <b>App Key</b> generated hash matches the one generated by the server,
  and this ensures that the <b>App Key</b> <u>secret</u> matches for the <b>App Key</b> provided. It is advisable to ensure
  that the <u>secret</u> is not exposed or displayed on your client website.</p>

  <h4>Here are the steps to generate the hash:</h4>
  <ol>
    <li><span>Concatenate the <b>Room</b> name, duration (in hours, max value is <u>24</u>) and the starting datetime stamp
    (ISO 8601) (e.g. <code>var str = room + "_" + duration + "_" + startDateTimeStamp</code></span></li>
    <li><span>Hash the concatenated string with the <b>App Key</b> secret using HMAC SHA-1
    (e.g. <code>var hash = CryptoJS.HmacSHA1(str, secret)</code></span></li>
    <li><span>Encode hash string to using Base64 encoding
    (e.g. <code>var base64Hash = hash.toString(CryptoJS.enc.Base64)</code></span></li>
    <li><span>Replace special characters for URI strings (e.g. <code>var outputHash = encodeURIComponent(base64Hash)</code></span></li>
  </ol>
   
  <p>For this method, the starting datetime, duration for the client connection session to the
  <b>Room</b> is based on duration and starting datetime provided after authentication is successful.
  The maximum duration is <u>24</u> hours. Note that you provide an expired starting datetime stamp, the connection session
  will be not be able to start as it is considered "ended".</p>
</article>